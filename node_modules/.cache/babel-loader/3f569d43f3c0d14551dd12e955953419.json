{"ast":null,"code":"import React, { useEffect } from 'react';\nvar HAS_MEDIA_SESSION = window && window.navigator && 'mediaSession' in window.navigator;\nvar _navigator = navigator,\n    mediaSession = _navigator.mediaSession;\n\nvar MediaSession = function MediaSession(props) {\n  var _props$title = props.title,\n      title = _props$title === void 0 ? '' : _props$title,\n      _props$artist = props.artist,\n      artist = _props$artist === void 0 ? '' : _props$artist,\n      _props$album = props.album,\n      album = _props$album === void 0 ? '' : _props$album,\n      _props$artwork = props.artwork,\n      artwork = _props$artwork === void 0 ? [] : _props$artwork,\n      onPlay = props.onPlay,\n      onPause = props.onPause,\n      onSeekBackward = props.onSeekBackward,\n      onSeekForward = props.onSeekForward,\n      onPreviousTrack = props.onPreviousTrack,\n      onNextTrack = props.onNextTrack,\n      children = props.children;\n  useEffect(function () {\n    mediaSession.metadata = new MediaMetadata({\n      title: title,\n      artist: artist,\n      album: album,\n      artwork: artwork\n    });\n    return function () {\n      mediaSession.metadata = null;\n    };\n  }, [title, artist, album, artwork]);\n  useEffect(function () {\n    mediaSession.setActionHandler('play', onPlay);\n    return function () {\n      mediaSession.setActionHandler('play', null);\n    };\n  }, [onPlay]);\n  useEffect(function () {\n    mediaSession.setActionHandler('pause', onPause);\n    return function () {\n      mediaSession.setActionHandler('pause', null);\n    };\n  }, [onPause]);\n  useEffect(function () {\n    mediaSession.setActionHandler('seekbackward', onSeekBackward);\n    return function () {\n      mediaSession.setActionHandler('seekbackward', null);\n    };\n  }, [onSeekBackward]);\n  useEffect(function () {\n    mediaSession.setActionHandler('seekforward', onSeekForward);\n    return function () {\n      mediaSession.setActionHandler('seekforward', null);\n    };\n  }, [onSeekForward]);\n  useEffect(function () {\n    mediaSession.setActionHandler('previoustrack', onPreviousTrack);\n    return function () {\n      mediaSession.setActionHandler('previoustrack', null);\n    };\n  }, [onPreviousTrack]);\n  useEffect(function () {\n    mediaSession.setActionHandler('nexttrack', onNextTrack);\n    return function () {\n      mediaSession.setActionHandler('nexttrack', null);\n    };\n  }, [onNextTrack]);\n  return children || null;\n};\n\nvar Wrapper = function Wrapper(props) {\n  if (!HAS_MEDIA_SESSION) {\n    return props.children || null;\n  }\n\n  return React.createElement(MediaSession, Object.assign({}, props));\n};\n\nexport default Wrapper;","map":{"version":3,"sources":["../src/constant.ts","../src/media_session.tsx","../src/index.tsx"],"names":["HAS_MEDIA_SESSION","window","mediaSession","navigator","MediaSession","title","artist","album","artwork","onPlay","onPause","onSeekBackward","onSeekForward","onPreviousTrack","onNextTrack","children","props","useEffect","Wrapper","React"],"mappings":"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","sourcesContent":["export const HAS_MEDIA_SESSION =\n  window && window.navigator && 'mediaSession' in window.navigator;\n\ninterface Artwork {\n  src: string;\n  sizes: string;\n  type?: string;\n}\n\nexport interface MediaSessionProps {\n  title?: string;\n  artist?: string;\n  album?: string;\n  artwork: Artwork[];\n\n  onPlay?: (...args: any[]) => any;\n  onPause?: (...args: any[]) => any;\n  onSeekBackward?: (...args: any[]) => any;\n  onSeekForward?: (...args: any[]) => any;\n  onPreviousTrack?: (...args: any[]) => any;\n  onNextTrack?: (...args: any[]) => any;\n\n  [key: string]: any;\n}\n","import { useEffect } from 'react';\n\nimport { MediaSessionProps } from './constant';\n\n// @ts-ignore\nconst { mediaSession } = navigator;\n\nconst MediaSession = (props: MediaSessionProps) => {\n  const {\n    title = '',\n    artist = '',\n    album = '',\n    artwork = [],\n\n    onPlay,\n    onPause,\n    onSeekBackward,\n    onSeekForward,\n    onPreviousTrack,\n    onNextTrack,\n\n    children,\n  } = props;\n\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.metadata = new MediaMetadata({\n      title,\n      artist,\n      album,\n      artwork,\n    });\n    return () => {\n      mediaSession.metadata = null;\n    };\n  }, [title, artist, album, artwork]);\n\n  useEffect(() => {\n    mediaSession.setActionHandler('play', onPlay);\n    return () => {\n      mediaSession.setActionHandler('play', null);\n    };\n  }, [onPlay]);\n  useEffect(() => {\n    mediaSession.setActionHandler('pause', onPause);\n    return () => {\n      mediaSession.setActionHandler('pause', null);\n    };\n  }, [onPause]);\n  useEffect(() => {\n    mediaSession.setActionHandler('seekbackward', onSeekBackward);\n    return () => {\n      mediaSession.setActionHandler('seekbackward', null);\n    };\n  }, [onSeekBackward]);\n  useEffect(() => {\n    mediaSession.setActionHandler('seekforward', onSeekForward);\n    return () => {\n      mediaSession.setActionHandler('seekforward', null);\n    };\n  }, [onSeekForward]);\n  useEffect(() => {\n    mediaSession.setActionHandler('previoustrack', onPreviousTrack);\n    return () => {\n      mediaSession.setActionHandler('previoustrack', null);\n    };\n  }, [onPreviousTrack]);\n  useEffect(() => {\n    mediaSession.setActionHandler('nexttrack', onNextTrack);\n    return () => {\n      mediaSession.setActionHandler('nexttrack', null);\n    };\n  }, [onNextTrack]);\n\n  return children || null;\n};\n\nexport default MediaSession;\n","import React from 'react';\n\nimport { HAS_MEDIA_SESSION, MediaSessionProps } from './constant';\n\nimport MediaSession from './media_session';\n\nconst Wrapper = (props: MediaSessionProps) => {\n  if (!HAS_MEDIA_SESSION) {\n    return props.children || null;\n  }\n  return <MediaSession {...props} />;\n};\n\nexport default Wrapper;\n"]},"metadata":{},"sourceType":"module"}