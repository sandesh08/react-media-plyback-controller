{"version":3,"file":"index.modern.js","sources":["../src/constant.ts","../src/media_session.tsx","../src/index.tsx"],"sourcesContent":["export const HAS_MEDIA_SESSION =\n  window && window.navigator && 'mediaSession' in window.navigator;\n\ninterface Artwork {\n  src: string;\n  sizes: string;\n  type?: string;\n}\n\nexport interface MediaSessionProps {\n  title?: string;\n  artist?: string;\n  album?: string;\n  artwork: Artwork[];\n\n  onPlay?: (...args: any[]) => any;\n  onPause?: (...args: any[]) => any;\n  onSeekBackward?: (...args: any[]) => any;\n  onSeekForward?: (...args: any[]) => any;\n  onPreviousTrack?: (...args: any[]) => any;\n  onNextTrack?: (...args: any[]) => any;\n\n  [key: string]: any;\n}\n","import { useEffect } from 'react';\n\nimport { MediaSessionProps } from './constant';\n\n// @ts-ignore\nconst { mediaSession } = navigator;\n\nconst MediaSession = (props: MediaSessionProps) => {\n  const {\n    title = '',\n    artist = '',\n    album = '',\n    artwork = [],\n\n    onPlay,\n    onPause,\n    onSeekBackward,\n    onSeekForward,\n    onPreviousTrack,\n    onNextTrack,\n\n    children,\n  } = props;\n\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.metadata = new MediaMetadata({\n      title,\n      artist,\n      album,\n      artwork,\n    });\n    return () => {\n      mediaSession.metadata = null;\n    };\n  }, [title, artist, album, artwork]);\n\n  useEffect(() => {\n    mediaSession.setActionHandler('play', onPlay);\n    return () => {\n      mediaSession.setActionHandler('play', null);\n    };\n  }, [onPlay]);\n  useEffect(() => {\n    mediaSession.setActionHandler('pause', onPause);\n    return () => {\n      mediaSession.setActionHandler('pause', null);\n    };\n  }, [onPause]);\n  useEffect(() => {\n    mediaSession.setActionHandler('seekbackward', onSeekBackward);\n    return () => {\n      mediaSession.setActionHandler('seekbackward', null);\n    };\n  }, [onSeekBackward]);\n  useEffect(() => {\n    mediaSession.setActionHandler('seekforward', onSeekForward);\n    return () => {\n      mediaSession.setActionHandler('seekforward', null);\n    };\n  }, [onSeekForward]);\n  useEffect(() => {\n    mediaSession.setActionHandler('previoustrack', onPreviousTrack);\n    return () => {\n      mediaSession.setActionHandler('previoustrack', null);\n    };\n  }, [onPreviousTrack]);\n  useEffect(() => {\n    mediaSession.setActionHandler('nexttrack', onNextTrack);\n    return () => {\n      mediaSession.setActionHandler('nexttrack', null);\n    };\n  }, [onNextTrack]);\n\n  return children || null;\n};\n\nexport default MediaSession;\n","import React from 'react';\n\nimport { HAS_MEDIA_SESSION, MediaSessionProps } from './constant';\n\nimport MediaSession from './media_session';\n\nconst Wrapper = (props: MediaSessionProps) => {\n  if (!HAS_MEDIA_SESSION) {\n    return props.children || null;\n  }\n  return <MediaSession {...props} />;\n};\n\nexport default Wrapper;\n"],"names":["HAS_MEDIA_SESSION","window","navigator","mediaSession","MediaSession","props","title","artist","album","artwork","onPlay","onPause","onSeekBackward","onSeekForward","onPreviousTrack","onNextTrack","children","useEffect","metadata","MediaMetadata","setActionHandler","Wrapper","React"],"mappings":";;AAAO,IAAMA,iBAAiB,GAC5BC,MAAM,IAAIA,MAAM,CAACC,SAAjB,IAA8B,kBAAkBD,MAAM,CAACC,SADlD;;iBCKkBA;IAAjBC,0BAAAA;;AAER,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD;qBAefA,MAbFC;MAAAA,kCAAQ;sBAaND,MAZFE;MAAAA,oCAAS;qBAYPF,MAXFG;MAAAA,kCAAQ;uBAWNH,MAVFI;MAAAA,sCAAU;MAEVC,SAQEL,MARFK;MACAC,UAOEN,MAPFM;MACAC,iBAMEP,MANFO;MACAC,gBAKER,MALFQ;MACAC,kBAIET,MAJFS;MACAC,cAGEV,MAHFU;MAEAC,WACEX,MADFW;AAGFC,EAAAA,SAAS,CAAC;AAERd,IAAAA,YAAY,CAACe,QAAb,GAAwB,IAAIC,aAAJ,CAAkB;AACxCb,MAAAA,KAAK,EAALA,KADwC;AAExCC,MAAAA,MAAM,EAANA,MAFwC;AAGxCC,MAAAA,KAAK,EAALA,KAHwC;AAIxCC,MAAAA,OAAO,EAAPA;AAJwC,KAAlB,CAAxB;AAMA,WAAO;AACLN,MAAAA,YAAY,CAACe,QAAb,GAAwB,IAAxB;AACD,KAFD;AAGD,GAXQ,EAWN,CAACZ,KAAD,EAAQC,MAAR,EAAgBC,KAAhB,EAAuBC,OAAvB,CAXM,CAAT;AAaAQ,EAAAA,SAAS,CAAC;AACRd,IAAAA,YAAY,CAACiB,gBAAb,CAA8B,MAA9B,EAAsCV,MAAtC;AACA,WAAO;AACLP,MAAAA,YAAY,CAACiB,gBAAb,CAA8B,MAA9B,EAAsC,IAAtC;AACD,KAFD;AAGD,GALQ,EAKN,CAACV,MAAD,CALM,CAAT;AAMAO,EAAAA,SAAS,CAAC;AACRd,IAAAA,YAAY,CAACiB,gBAAb,CAA8B,OAA9B,EAAuCT,OAAvC;AACA,WAAO;AACLR,MAAAA,YAAY,CAACiB,gBAAb,CAA8B,OAA9B,EAAuC,IAAvC;AACD,KAFD;AAGD,GALQ,EAKN,CAACT,OAAD,CALM,CAAT;AAMAM,EAAAA,SAAS,CAAC;AACRd,IAAAA,YAAY,CAACiB,gBAAb,CAA8B,cAA9B,EAA8CR,cAA9C;AACA,WAAO;AACLT,MAAAA,YAAY,CAACiB,gBAAb,CAA8B,cAA9B,EAA8C,IAA9C;AACD,KAFD;AAGD,GALQ,EAKN,CAACR,cAAD,CALM,CAAT;AAMAK,EAAAA,SAAS,CAAC;AACRd,IAAAA,YAAY,CAACiB,gBAAb,CAA8B,aAA9B,EAA6CP,aAA7C;AACA,WAAO;AACLV,MAAAA,YAAY,CAACiB,gBAAb,CAA8B,aAA9B,EAA6C,IAA7C;AACD,KAFD;AAGD,GALQ,EAKN,CAACP,aAAD,CALM,CAAT;AAMAI,EAAAA,SAAS,CAAC;AACRd,IAAAA,YAAY,CAACiB,gBAAb,CAA8B,eAA9B,EAA+CN,eAA/C;AACA,WAAO;AACLX,MAAAA,YAAY,CAACiB,gBAAb,CAA8B,eAA9B,EAA+C,IAA/C;AACD,KAFD;AAGD,GALQ,EAKN,CAACN,eAAD,CALM,CAAT;AAMAG,EAAAA,SAAS,CAAC;AACRd,IAAAA,YAAY,CAACiB,gBAAb,CAA8B,WAA9B,EAA2CL,WAA3C;AACA,WAAO;AACLZ,MAAAA,YAAY,CAACiB,gBAAb,CAA8B,WAA9B,EAA2C,IAA3C;AACD,KAFD;AAGD,GALQ,EAKN,CAACL,WAAD,CALM,CAAT;AAOA,SAAOC,QAAQ,IAAI,IAAnB;AACD,CApED;;ACDA,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAAChB,KAAD;AACd,MAAI,CAACL,iBAAL,EAAwB;AACtB,WAAOK,KAAK,CAACW,QAAN,IAAkB,IAAzB;AACD;;AACD,SAAOM,mBAAA,CAAClB,YAAD,oBAAkBC,MAAlB,CAAP;AACD,CALD;;;;"}